% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_prep.R
\name{make_analysis_df}
\alias{make_analysis_df}
\title{Join ITPC and spectral-exponent data for modeling}
\usage{
make_analysis_df(itpc_path, spec_path)
}
\arguments{
\item{itpc_path}{Path to ITPC CSV with columns \verb{subject, roi, P, T, type, value}.}

\item{spec_path}{Path to spectral-params CSV with columns \verb{subject, roi, P, T, condition, exponent}.}
}
\value{
A tibble ready for hierarchical modeling (e.g., with \strong{brms}), containing only \code{prestim}/\code{stim} conditions and matched keys across sources.
}
\description{
Reads two CSVs and builds a tidy table keyed by \code{subject}, \code{roi}, \code{P}, \code{T}, \code{S}.
}
\details{
\strong{Inclusion/Exclusion logic}
\itemize{
\item Keeps only ITPC rows where \code{type} is one of \code{"prestim_itpc"} or \code{"stim_itpc"}.
\item Maps \code{type} → \code{S} as: \code{"prestim_itpc"} → \code{"prestim"}, \code{"stim_itpc"} → \code{"stim"}.
\item In spectral params, renames \code{condition} to \code{S} and requires \code{S} to match the ITPC side.
\item Uses an inner join on \code{c(subject, roi, P, T, S)}; rows missing on either side are dropped.
}
}
\section{Output shape}{

A tibble with one row per \verb{(subject, roi, P, T, S)} and columns:
\itemize{
\item \code{subject} (factor), \code{roi} (factor)
\item \code{P}, \code{T}
\item \code{S} (factor with levels \code{c("prestim","stim")})
\item \code{itpc} (numeric), \code{exponent} (numeric)
}
}

\examples{
\dontrun{
df <- make_analysis_df(
  "data/Destrieux_final_itpc.csv",
  "data/specparam_all.csv"
)
}
}
